# test_set
# Hirata Equipment Log Analyzer

This Streamlit web application provides a robust engineering analysis of SECS/GEM (SEMI Equipment Communications Standard / Generic Equipment Model) log files generated by Hirata front-end loadport equipment.

The primary goal of this tool is to transform raw, cryptic log data into actionable insights for process engineers, maintenance technicians, and operations managers. It focuses on calculating key performance indicators (KPIs), identifying operational anomalies, and providing a clear, detailed view of the equipment's activity.

## Features

*   **Dynamic File Upload:** Accepts any valid `.txt` or `.log` file via a simple drag-and-drop interface.
*   **Job Performance Dashboard:** Automatically detects production jobs (`LOADSTART` or `UNLOADSTART`) and calculates critical KPIs:
    *   **Lot ID:** The identifier of the batch being processed.
    *   **Total Panels:** The number of units in the job.
    *   **Job Duration:** The total time from job start to completion.
    *   **Average Cycle Time:** The average processing time per panel.
*   **Overall Log Summary:** Provides a high-level summary of all activity in the log, including:
    *   Unique **Operator IDs** who interacted with the machine.
    *   Unique **Magazine IDs** used.
    *   A log of all **Control State Changes** (Local vs. Remote).
    *   A list of all **Alarms and Anomalies** (e.g., Host command failures).
*   **Exploratory Data Analysis (EDA):** An expandable section with visual charts for deeper analysis:
    *   **Event Frequency Chart:** A bar chart showing the count of every event type, perfect for spotting unusual activity.
    *   **Alarm Analysis Chart & Table:** A bar chart of alarm frequencies and a filtered table showing exactly when each alarm occurred.
*   **Detailed Event Log:** A complete, filterable table of all meaningful parsed events, with all data correctly aligned in labeled columns.

## Project Structure

This project follows a modular, professional design to ensure maintainability and a clear separation of concerns.

```
hirata-log-analyzer/
├── .streamlit/
│   └── config.toml      # Disables the file watcher to prevent errors on Streamlit Cloud.
├── app.py               # The main Streamlit file that builds the user interface.
├── analyzer.py          # Contains all logic for calculating KPIs and performing analysis.
├── log_parser.py        # Contains all logic for parsing the raw log file text.
├── parser_utils.py      # Helper functions for robust, hierarchical parsing of SECS data.
├── config.py            # A centralized file for all static data like event maps and schemas.
└── requirements.txt     # Lists all required Python libraries for the environment.
```

### Module Descriptions

*   **`app.py`**: The entry point for the Streamlit application. It handles the UI layout, file uploading, and calls the other modules to process and display data. It is the "View" in a Model-View-Controller architecture.

*   **`analyzer.py`**: The "brains" of the operation. It contains two key functions:
    *   `analyze_data()`: Takes the list of parsed events and calculates the high-level dashboard KPIs. It is designed to be resilient and handle logs with or without complete job cycles.
    *   `perform_eda()`: Takes the parsed data as a DataFrame and calculates frequencies and summaries for the EDA section.

*   **`log_parser.py`**: The core data extraction engine. Its primary responsibility is to convert the raw text from the log file into a structured Python list of dictionaries. It uses a robust, hierarchical parsing strategy to handle the complex, nested structure of SECS-II messages.
    *   `_parse_s6f11_report()`: A specialized function to parse event reports.
    *   `_parse_s2f49_command()`: A specialized function to parse remote commands.

*   **`parser_utils.py`**: Contains low-level, reusable utility functions that support the `log_parser`.
    *   `tokenize()`: Converts a raw text block into a stream of tokens (e.g., `LIST_START`, `ASCII`, `UINT`).
    *   `build_tree()`: Converts a stream of tokens into a nested Python list that mirrors the original SECS message structure.

*   **`config.py`**: Acts as a central database for the application. It contains the dictionaries (`CEID_MAP`, `RPTID_MAP`) that translate cryptic codes (like CEID `151`) into human-readable text (`MagazineDocked`) and define the data schema for different report types. This makes the code easier to update and maintain.

This project is now complete and validated. It serves as a robust and reliable tool for gaining engineering insights from Hirata equipment logs.
